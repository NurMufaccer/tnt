<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    />
    <link rel="stylesheet" href="./projects.css" />
  </head>
  <body>
    <div class="mainBox">
      <input type="checkbox" id="check" />
      <div class="mainContainer">
        <nav class="projectNav">
          <h3 class="navTitle">Your Projects (3)</h3>
          <button id="openPopup" class="btnProjectModal">
            <img src="./images/image_28.png" alt="" />Add Project
          </button>
          <div class="popup" id="popup">
            <div class="overlay"></div>
            <div class="popup-content">
              <h3>Add New Project</h3>
              <!-- Location Info -->

              <div class="infoContainerWidth">
                <div class="infoHeader">
                  <h3>Address<span style="color: #d70404">*</span></h3>
                </div>
                <div class="">
                  <div>
                    <button class="btnPrimary">
                      <img src="./images/Location_icon.png" alt="" />123 Bukit
                      Batok Ave
                    </button>
                  </div>
                </div>
              </div>
              <div class="infoContainerWidth">
                <div class="infoHeader">
                  <h3>Cover Image</h3>
                </div>
                <div class="">
                  <div>
                    <button class="btnPrimary">
                      <img src="./images/PDF_Icon.png" alt="" />Bukit
                      Batok3dRender.pdf
                    </button>
                  </div>
                </div>
              </div>

              <div class="controls">
                <button class="btnClose">Cancel</button>
                <button class="btnSubmit">Save</button>
              </div>
            </div>
          </div>
        </nav>
        <div class="mainContent">
          <div class="projectsSection">
            <div class="projectsContainer">
              <div class="project">
                <img src="./images/image_25.png" alt="" />
                <div class="projectInfo">
                  <p class="projectTitle">Project 1</p>
                  <p class="projectDescription">123 Westwood Ave</p>
                </div>
              </div>
              <div class="project">
                <img src="./images/image_26.png" alt="" />
                <div class="projectInfo">
                  <p class="projectTitle">Project 2</p>
                  <p class="projectDescription">123 Woodlands St 64</p>
                </div>
              </div>
            </div>
          </div>
          <!-- project preview -->
          <div class="projectPreview">
            <div>
              <h3 class="chartContainerHeading">Projects Worked</h3>
              <div class="chartContainer">
                <div class="chartBox">
                  <canvas id="myChart"></canvas>
                </div>
                <div class="chartDetails">
                  <ul></ul>
                </div>
              </div>
            </div>
            <hr />
            <div class="toDoContainer">
              <div class="toDoHeader">
                <h3>To-do List</h3>
                <button class="btnManage">Manage ></button>
              </div>
              <div class="schedule">
                <h3>09:30AM</h3>
                <p>Site Check @ Woodlands</p>
              </div>
              <div class="schedule">
                <h3>11:00AM</h3>
                <p>Client Zoom Meeting</p>
              </div>
              <div class="schedule">
                <h3>04:15PM</h3>
                <p>Do up 3d rendering for Woodlands</p>
              </div>

              <!-- popup -->
              <button id="openPopup2" class="btnAddTask">Add Task</button>
              <div class="popup" id="popupAddTask">
                <div class="overlay"></div>
                <div class="popup-content">
                  <h3>Add New Task</h3>

                  <div class="taskPopupContainer">
                    <img src="./images/image_66.png" alt="" />
                    <div class="searchInput">
                      <input type="text" placeholder="Task Title" />

                      <button class="btn btn-secondary" type="button">
                        <i class="fa fa-search" aria-hidden="true"></i>
                      </button>
                    </div>
                  </div>
                  <div class="taskPopupContainer">
                    <img src="./images/image_60.png" alt="" />
                    <div class="scheduleInput">
                      <input
                        class="inputDate"
                        type="text"
                        placeholder="Start Date"
                      />
                      <input
                        class="inputTime"
                        type="text"
                        placeholder="Start time"
                      />
                      <p>-</p>
                      <input
                        class="inputTime"
                        type="text"
                        placeholder="Start time"
                      />
                      <input
                        class="inputDate"
                        type="text"
                        placeholder="Start Date"
                      />
                    </div>
                  </div>
                  <div class="taskPopupContainer">
                    <img src="./images/image_58.png" alt="" />
                    <div class="searchInput">
                      <input type="text" placeholder="Recommended Duration: " />
                    </div>
                  </div>
                  <div class="textareaPopupContainer">
                    <img src="./images/image_59.png" alt="" />
                    <div class="searchInput">
                      <textarea
                        name=""
                        rows="6"
                        placeholder="Description"
                      ></textarea>
                    </div>
                  </div>

                  <div class="controls">
                    <button class="btnClose">Cancel</button>
                    <button class="btnSubmit">Save</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Navbar for mobile device -->
      <nav class="navbar">
        <div class="btnOne">
          <label for="check">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="25"
              height="16"
              viewBox="0 0 25 16"
              fill="none"
              style="cursor: pointer"
            >
              <line
                x1="1"
                y1="1"
                x2="24"
                y2="1"
                stroke="black"
                stroke-width="2"
                stroke-linecap="round"
              />
              <line
                x1="1"
                y1="8"
                x2="24"
                y2="8"
                stroke="black"
                stroke-width="2"
                stroke-linecap="round"
              />
              <line
                x1="1"
                y1="15"
                x2="24"
                y2="15"
                stroke="black"
                stroke-width="2"
                stroke-linecap="round"
              />
            </svg>
          </label>
        </div>
        <div class="navLogo">
          <a href="#">
            <img src="./images/TNT_LOGO.png" alt="" srcset="" />
          </a>
        </div>
      </nav>
      <!-- Sidebar -->
      <div class="sidebarMenu">
        <div class="logo">
          <a href="#"><img src="./images/TNT_LOGO.png" alt="" srcset="" /></a>
          <div class="logoTag">
            <p>Hello, <br />Chloe Saw</p>
          </div>
        </div>
        <div class="btnTwo">
          <label for="check">
            <i class="fa-solid fa-xmark"></i>
          </label>
        </div>

        <div class="menu">
          <ul class="largeView">
            <!-- Profile li-->
            <li>
              <p class="menuTag">Profile</p>
              <div class="subMenu">
                <ul>
                  <li>
                    <a class="menuChild" href="#">
                      <img src="./images/profileLogo.png" alt="" />
                      <p>Edit Profile</p>
                    </a>
                  </li>
                  <li>
                    <a class="menuChild" href="#">
                      <img src="./images/InterfaceDesignLogo.png" alt="" />
                      <p>Interface Design</p>
                    </a>
                  </li>
                </ul>
              </div>
            </li>
            <!-- Work li-->
            <li>
              <p class="menuTag">Work</p>
              <div class="subMenu">
                <ul>
                  <li>
                    <a class="menuChild" href="#">
                      <img src="./images/projects.png" alt="" />
                      <p>Projects</p>
                    </a>
                  </li>
                  <li>
                    <a class="menuChild" href="#">
                      <img src="./images/schedule.png" alt="" />
                      <p>Schedule</p>
                    </a>
                  </li>
                  <li>
                    <a class="menuChild" href="#">
                      <img src="./images/Resources.png" alt="" />
                      <p>Resources</p>
                    </a>
                  </li>
                </ul>
              </div>
            </li>
            <!-- Others li-->
            <li>
              <p class="menuTag">Others</p>
              <div class="subMenu">
                <ul>
                  <li>
                    <a class="menuChild" href="#">
                      <img src="./images/analytics.png" alt="" />
                      <p>Analytics</p>
                    </a>
                  </li>
                  <li>
                    <a class="menuChild" href="#">
                      <img src="./images/reset pw.png" alt="" />
                      <p>Reset Password</p>
                    </a>
                  </li>
                </ul>
              </div>
            </li>
          </ul>
          <!-- Mobile View -->
          <ul class="mobileView">
            <li>
              <div class="subMenu">
                <ul>
                  <li>
                    <a href="#"> Edit Profile </a>
                  </li>
                  <li>
                    <a href="#"> Interface Design </a>
                  </li>
                  <li>
                    <a href="#"> Projects </a>
                  </li>
                  <li>
                    <a href="#"> Schedule </a>
                  </li>
                  <li>
                    <a href="#"> Resources </a>
                  </li>
                  <li>
                    <a href="#"> Analytics </a>
                  </li>
                  <li>
                    <a href="#"> Reset Password </a>
                  </li>
                </ul>
              </div>
            </li>
          </ul>
        </div>

        <div class="logoutLink">
          <a href="">Logout</a>
        </div>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
      // popup
      // document.addEventListener("DOMContentLoaded", (event) => {
      //   const openPopupBtn = document.getElementById("openPopup");
      //   const popup = document.getElementById("popup");
      //   const closePopupBtn = document.querySelector(".btnClose");
      //   const overlay = document.querySelector(".popup .overlay");

      //   openPopupBtn.addEventListener("click", () => {
      //     popup.classList.add("active");
      //   });

      //   closePopupBtn.addEventListener("click", () => {
      //     popup.classList.remove("active");
      //   });

      //   overlay.addEventListener("click", () => {
      //     popup.classList.remove("active");
      //   });
      // });
      document.addEventListener("DOMContentLoaded", (event) => {
        // Function to open a popup
        function openPopup(popupId) {
          document.getElementById(popupId).classList.add("active");
        }

        // Function to close a popup
        function closePopup(popupId) {
          document.getElementById(popupId).classList.remove("active");
        }

        // Add event listener for "Add Task" button
        document.getElementById("openPopup2").addEventListener("click", () => {
          openPopup("popupAddTask");
        });

        // Add event listener for "Add Project" button
        document.getElementById("openPopup").addEventListener("click", () => {
          openPopup("popup");
        });

        // Add event listeners for "Close" buttons
        document.querySelectorAll(".btnClose").forEach((button) => {
          button.addEventListener("click", () => {
            closePopup(button.closest(".popup").id);
          });
        });

        // Add event listeners for overlays
        document.querySelectorAll(".popup .overlay").forEach((overlay) => {
          overlay.addEventListener("click", () => {
            closePopup(overlay.closest(".popup").id);
          });
        });

        // Add event listeners for "Submit" buttons
        document.querySelectorAll(".btnSubmit").forEach((button) => {
          button.addEventListener("click", () => {
            // Handle the form submission here
            // You can add your form submission logic here

            // Close the popup after submission
            closePopup(button.closest(".popup").id);
          });
        });
      });

      // chart
      const ul = document.querySelector(".chartContainer .chartDetails ul");
      const data = {
        labels: ["Project 1", "Project 2", "Project 3"],
        datasets: [
          {
            data: [45, 85, 18],
            backgroundColor: ["#000", "#888", "#D9D9D9"],
            borderWidth: 5,
            cutout: "70%", // specify cutout value without quotes
          },
        ],
      };

      const centerTextPlugin = {
        id: "centerText",
        beforeDraw: function (chart) {
          const width = chart.width;
          const height = chart.height;
          const ctx = chart.ctx;

          ctx.restore();

          // Set initial font size and weight for the projectsNo text
          ctx.font = "600 28px Poppins"; // 600 is the font-weight, 28px is the font size
          ctx.textBaseline = "middle";

          const projectsLength = chart.data.labels.length;
          const projectsNo = `${projectsLength}`;

          // Calculate dimensions for centering text
          const textWidth = ctx.measureText(projectsNo).width;
          const textX = Math.round((width - textWidth) / 2);
          const textY = height / 2;

          ctx.fillText(projectsNo, textX, textY - 10); // Adjust textY to move it higher

          // Additional text for "Projects"
          ctx.font = "400 18px sans-serif"; // Change font size and weight for "Projects"
          const textWidthProjects = ctx.measureText("Projects").width;
          const textXProjects = Math.round((width - textWidthProjects) / 2);
          ctx.fillText("Projects", textXProjects, textY + 20);

          ctx.save();
        },
      };

      const config = {
        type: "doughnut",
        data: data,
        options: {
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: false,
            },
            tooltip: {
              enabled: false,
            },
          },
          hover: {
            mode: null, // Disable hover interactions
          },
        },
        plugins: [centerTextPlugin],
      };

      const populateUL = () => {
        data.labels.forEach((label, i) => {
          let li = document.createElement("li");
          let dot = document.createElement("span");
          dot.classList.add("dot");
          dot.style.backgroundColor = data.datasets[0].backgroundColor[i];
          li.appendChild(dot);
          li.innerHTML += `${label}: <span class="percentage">${data.datasets[0].data[i]} %</span>`;
          ul.appendChild(li);
        });
      };

      var myChart = new Chart(document.getElementById("myChart"), config);

      // Populate the UL list on page load
      populateUL();
    </script>
  </body>
</html>
